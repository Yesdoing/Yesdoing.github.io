---
layout: post
title: "ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”(Tail Call Optimization)ë€?"
categories: posting
---

![image.png](https://images.velog.io/post-images/yesdoing/bbb3b9a0-da8a-11e8-8483-39fd55313fb0/image.png)

ì¶œì²˜: [https://mbtskoudsalg.com/explore/ouroboros-transparent-png/](https://mbtskoudsalg.com/explore/ouroboros-transparent-png/)

# ğŸ˜º ë“¤ì–´ê°€ê¸° ì•ì„œ...

ì´ ê¸€ì„ ì“°ê²Œ ëœ ê³„ê¸°ëŠ” [ì½”ë“œìŠ¤í”¼ì¸  3rd-3 ES6+ í•¨ìˆ˜ì™€ OOP 2íšŒì°¨](https://youtu.be/h80tLv0fn88) ê°•ì˜ ì˜ìƒì„ ë³´ê³  ê´€ë ¨ëœ ë‚´ìš©ì„ ì¡°ì‚¬í•´ì„œ ìš”ì•½í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì œê°€ ì´í•´í•œ ë¶€ë¶„ì„ ì‘ì„±í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ë¯¸í¡í•œ ì ì´ë‚˜ ì˜ëª»ëœ ì ì´ ìˆìœ¼ë©´ ëŒ“ê¸€ë¡œ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤. ğŸ™

# ğŸ˜¸ ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ë€ ë¬´ì—‡ì¸ê°€?

ê°„ë‹¨í•˜ê²Œ ë§í•˜ìë©´, ì„œë¸Œë£¨í‹´ ì²´ì¸ì´ ì¼ì–´ë‚  ë•Œ ê° ì„œë¸Œë£¨í‹´ì˜ returnì— í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.

ì•„ì§ ì–´ë µë„¤ìš”, ì¢€ ë” ë‹¨ìˆœí™”í•´ì„œ ë§í•˜ìë©´ ê¼¬ë¦¬ í˜¸ì¶œ(Tail Call)ì„ ìµœì í™”í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ê¼¬ë¦¬ í˜¸ì¶œì´ë€ ìœ„í‚¤í”¼ë””ì•„ì— ë”°ë¥´ë©´ "ì„œë¸Œë£¨í‹´ì˜ í˜¸ì¶œì„ í”„ë¡œì‹œì €(procedure)ì˜ ë§ˆì§€ë§‰ í–‰ìœ„ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒ"ì„ ëœ»í•©ë‹ˆë‹¤. ìµìˆ™í•œ ì˜ˆë¡œëŠ” ì¬ê·€ í˜¸ì¶œì„ ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤. 

ê·¸ë¦¬ê³  ìµœì í™”ë€ Returnì„ í•  ë•Œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ "í˜¸ì¶œì´ ëœ" í•¨ìˆ˜ì—ì„œ "í˜¸ì¶œì„ í•œ" í•¨ìˆ˜ë¡œ ëŒì•„ì˜¤ëŠ” ë°˜í™˜ ì§€ì ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë§Œì•½ "í˜¸ì¶œì„ í•œ" í•¨ìˆ˜ê°€ ë©”ëª¨ë¦¬(ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ - Argument, Local Variable)ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ”ë‹¤ë©´ "í˜¸ì¶œì„ í•œ" í•¨ìˆ˜ë¡œ ëŒì•„ì˜¬ í•„ìš”ê°€ ì—†ìœ¼ë©°, í•¨ìˆ˜ë“¤ì´ í•œ ë²ˆì”© "í˜¸ì¶œì´ ë˜ê³ " ë§ˆì§€ë§‰ìœ¼ë¡œ "í˜¸ì¶œì´ ëœ" í•¨ìˆ˜ëŠ” ìµœì´ˆ í•¨ìˆ˜ í˜¸ì¶œ ì§€ì ìœ¼ë¡œ ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì„ ëœ»í•©ë‹ˆë‹¤.

ì´ê²ƒì´ ê°€ëŠ¥í•˜ê¸° ìœ„í•´ì„œëŠ”,  returnì—ì„œëŠ” ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.(ì–¸ì–´ ìŠ¤í™ì—ì„œ ì§€ì •í•œ ìŠ¤íƒì— ë©”ëª¨ë¦¬ë¥¼ ìŒ“ì§€ ì•ŠëŠ” ì—°ì‚°ìëŠ” ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.)

ë§ì´ ë„ˆë¬´ ì–´ë µìŠµë‹ˆë‹¤. ì˜ˆì œë¥¼ ë³´ì‹œì£ .

## Tail recursionì˜ ì˜¬ë°”ë¥¸ ì˜ˆ

    // ì‚¼í•­ ì—°ì‚°ìëŠ” JS ìŠ¤í™ì— ì •ì˜ëœ ì½œìŠ¤íƒì— ë©”ëª¨ë¦¬ê°€ ì¡íˆì§€ ì•ŠëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤.
    const factorial = (x, acc=1) => {
    	return ( x <= 1 ? acc : factorial(x-1, x*acc));
    };


![image.png](https://images.velog.io/post-images/yesdoing/b7d00c40-da89-11e8-8483-39fd55313fb0/image.png)


## Tail recursionì˜ í‹€ë¦° ì˜ˆ

    // ì‚¼í•­ ì—°ì‚°ìëŠ” JS ìŠ¤í™ì— ì •ì˜ëœ ì½œìŠ¤íƒì— ë©”ëª¨ë¦¬ê°€ ì¡íˆì§€ ì•ŠëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤.
    const factorial = (x) => {
    	return ( x <= 0 ? 1 : x * factorial(x-1));
    };


![image.png](https://images.velog.io/post-images/yesdoing/bd3ff460-da89-11e8-8483-39fd55313fb0/image.png)


ìœ„ì˜ ê·¸ë¦¼ì„ ë³´ì‹œë©´ ì„œë¸Œë£¨í‹´ ì²´ì¸ì´ ë°œìƒí•  ë•Œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(execution context)ê°€ ìˆìœ¼ë©´ ì°¨ë¡€ëŒ€ë¡œ í•¨ìˆ˜ê°€ í˜¸ì¶œì´ ëœ ìˆœì„œëŒ€ë¡œ ìŠ¤íƒì— ë©”ëª¨ë¦¬ê°€ ìŒ“ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ìµœì í™”ë¥¼ í•  ê²½ìš°, í˜¸ì¶œëœ í•¨ìˆ˜ì— ëŒ€í•œ ë©”ëª¨ë¦¬ê°€ ì¡íˆì§€ ì•Šìœ¼ë¯€ë¡œ í•¨ìˆ˜ê°€ í˜¸ì¶œëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ë©° ë§ˆì§€ë§‰ í•¨ìˆ˜ëŠ” ìµœì´ˆ í˜¸ì¶œ ë¶€ì˜ ê°’ì„ ë°˜í™˜í•˜ê³  ì¢…ë£Œë©ë‹ˆë‹¤.

ì¢…í•©í•˜ìë©´ ì„œë¸Œë£¨í‹´ì˜ ì—°ì‡„ê°€ ë°œìƒí•˜ì˜€ì§€ë§Œ,  ì„œë¸Œë£¨í‹´ì´ ë£¨í‹´ìœ¼ë¡œ ëŒì•„ê°ˆ í•„ìš”ê°€ ì—†ìœ¼ë©´, ë§ˆì§€ë§‰ ì„œë¸Œë£¨í‹´ì—ì„œ ìµœì´ˆ í˜¸ì¶œ ë¶€ë¡œ ë°˜í™˜ ì§€ì ì„ ì§€ì •í•˜ì—¬ Stackì— ìŒ“ì´ëŠ” ë©”ëª¨ë¦¬ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

ì´ ê³¼ì •ë“¤ì€ ì„œë¸Œë£¨í‹´ì˜ ë°˜í™˜ ì§€ì (Return Point)ì„ ìˆ˜ì •í•˜ëŠ” ê³¼ì •ì„ ëœ»í•©ë‹ˆë‹¤. ì´ê²ƒì€ ì–¸ì–´ ì—”ì§„ì—ì„œ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆìœ¼ë©°, ê°œë°œìê°€ ì„ì˜ë¡œ ì ìš©í•˜ì§€ëŠ” ëª»í•©ë‹ˆë‹¤. 

# ğŸ˜¹ ê·¸ëŸ¼ ì™œ ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ë¥¼  í• ê¹Œìš”?

ìœ„ì˜ ì˜ˆì œë¥¼ ë³´ë©´ ì½œ ìŠ¤íƒì´ ìŒ“ì´ëŠ” ê²Œ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë©”ëª¨ë¦¬ì˜ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 

ì´ [ì‚¬ì´íŠ¸](https://kangax.github.io/compat-table/es6/)ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆì§€ë§Œ ì•„ì§ ë°ìŠ¤í¬íƒ‘ì—ì„œëŠ” ì‚¬íŒŒë¦¬, ëª¨ë°”ì¼ì—ì„œëŠ” IOS 11.3, 12ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¸Œë¼ìš°ì €ëŠ” ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 

í•˜ì§€ë§Œ JavaScriptëŠ” ES6 ìŠ¤í™ì—ì„œ ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ë¥¼ ì§€ì›í•œë‹¤ê³  ëª…ì‹œí•˜ê³  ìˆê³ , ì´ [ì‚¬ì´íŠ¸](https://www.linkedin.com/pulse/tail-call-optimizations-es6-michael-clark/)ë¥¼ ë³´ë©´ Chrome65ì—ì„œ ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ë¥¼ í•  ì‹œ ì•½ 17ë°° ì†ë„ í–¥ìƒì„ í•œë‹¤ê³  ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ê°€ ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ë¥¼ ì§€ì›í•˜ê²Œ ë  ê²ƒì„ ëŒ€ë¹„í•´ ë¯¸ë¦¬ ì´ë ‡ê²Œ ì½”ë”©ì„ í•˜ê¸° ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

# ğŸ˜» ê¼¬ë¦¬ ë¬¼ê¸° ìµœì í™”ì— ëŒ€í•´ ìì„¸íˆ ì„¤ëª…ëœ ì‚¬ì´íŠ¸ë“¤

1. [ì½”ë“œìŠ¤í”¼ì¸  3rd-3 ES6+ í•¨ìˆ˜ì™€ OOP 2íšŒì°¨](https://youtu.be/h80tLv0fn88)
2. [Tail call optimization in ECMAScript 6](http://2ality.com/2015/06/tail-call-optimization.html#the-conditional-operator)
3. [ES6 Tail Call Optimization Explained](http://benignbemine.github.io/2015/07/19/es6-tail-calls/)
4. [ECMAScript 6 Proper Tail Calls in WebKit](https://webkit.org/blog/6240/ecmascript-6-proper-tail-calls-in-webkit/)