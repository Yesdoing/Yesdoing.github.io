---
layout: post
title: "17. 01. 03 ~ 05"
categories:
  - TIL
---

## 18. 1. 3

### 오늘 한 일
  - AWS를 이용한 웹툰 알리미 제작중
    - 자바의 파싱라이브러리은 Jsoup을 찾아서 공부 시작. 파싱이 엄청편해졌다!!
    - 프로젝트를 작은 단위로 분해
      - slack 채널에 통신하는 Api 제작
        - apache Httpclient 라이브러리를 이용해서 Slack web hook api 규격에 맞춰 통신(완료)
      - 웹툰사이트에서 데이터를 크롤링
        - Jsoup 라이브러리를 이용해서 데이터 크롤링
          - Jsoup 사용법 공부
              - 코드
              ```
              @Test
              public void connectTest() throws Exception {
                Document doc = Jsoup.connect("http://comic.naver.com/webtoon/list.nhn?titleId=662774&weekday=wed").get();
                assertEquals("고수 :: 네이버 만화", doc.title());
              }

              @Test
              public void useDOMMethodToNavigateADocument() throws Exception {
                Document doc = null;
                try {
                  doc = Jsoup.connect("http://comic.naver.com/webtoon/list.nhn?titleId=318995&weekday=fri").get();
                } catch (IOException e) {
                  // TODO Auto-generated catch block
                  e.printStackTrace();
                }
                Elements tags = doc.select("table.viewList > tbody > tr:has(td:has(img[alt*=UP]))");
                Elements tds = tags.select("td");
                if(!tds.isEmpty()) {
                  System.out.println("true");
                }
                System.out.println("false");
              }
              ```

## 18. 1. 4

### 오늘 한 일
- AWS를 이용한 웹툰 알리미 제작중
  - 자바의 파싱라이브러리은 Jsoup을 찾아서 공부 시작. 파싱이 엄청편해졌다!!
  - 프로젝트를 작은 단위로 분해
    - slack 채널에 통신하는 Api 제작
      - apache Httpclient 라이브러리를 이용해서 Slack web hook api 규격에 맞춰 통신(완료)
    - 웹툰사이트에서 데이터를 크롤링
      - Jsoup 라이브러리를 이용해서 데이터 크롤링
        - Jsoup 사용법 공부(완료)
        - 네이버 웹툰 사이트에서 뜨는 웹툰은 NEW 아이콘의 img 태그를 이용하여 구별하면 됬지만 미리보기는 웹툰 목록 데이터가 동적으로 넘어와서 파서로 데이터를 가져올 수가 없었음.
        - 그래서 apache Httpclient를 이용해서 api를 직접 호출하여 웹툰 목록은 json 형태로 가져와 json 데이터 중 키가 'newVolumne'인 것이 최신 업데이트 목록을 표시하는 키인 것을 알아내서 split을 이용해 최신목록이 4개가 되면 업데이트 된거로 판단하기로함.
        - 코드
          ```
            @Test
            public void json() throws Exception {
               try (CloseableHttpClient httpclient = HttpClients.createDefault()) {

                  HttpGet httpGet = new HttpGet("http://nstore.naver.com/comic/volumeList.nhn?productNo=1940031&sortOrder=DESC");
                        System.out.println("Executing request " + httpGet.getRequestLine());

                        // Create a custom response handler
                        ResponseHandler<String> responseHandler = response -> {
                            int status = response.getStatusLine().getStatusCode();
                            if (status >= 200 && status < 300) {
                                HttpEntity responseEntity = response.getEntity();
                                return responseEntity != null ? EntityUtils.toString(responseEntity) : null;
                            } else {
                                throw new ClientProtocolException("Unexpected response status: " + status);
                            }
                        };
                        String responseBody = httpclient.execute(httpGet, responseHandler);

                        System.out.println("----------------------------------------");
                        String trim = responseBody.trim();
                        assertEquals(4, trim.split("\\\"newVolume\":true+").length);
               }
            }
          ```

### 앞으로 할 일
- 2018년 1년 계획 잡기
-	Spring boot 게시판 마무리 (진행 중)
-	노마드코더 - 인스타그램 강의 시청
-	회사 정리
-	객체지향 + TDD 연습을 위한 토이프로젝트 구현 예정(로또)
